{"version":3,"file":"index.js","sources":["../../../../../src/libs/utils.ts","../../../../../src/libs/injectRouter.ts","../../../../../src/libs/plainRouter.ts"],"sourcesContent":["import {Callback} from './types'\r\n\r\nexport function registerHook(list:Callback[], fn:Callback) {\r\n  list.push(fn);\r\n  return () => {\r\n    //等待调用的时候从中取出\r\n    const i = list.indexOf(fn);\r\n    if (i > -1) list.splice(i, 1);\r\n  };\r\n}\r\n\r\n\r\nexport function runQueue(queue:Callback[], fn:Callback, cb:Callback) {\r\n  const step = (index: number) => {\r\n    if (index >= queue.length) {\r\n      cb();\r\n    } else {\r\n      if (queue[index]) {\r\n        fn(queue[index], () => {\r\n          step(index + 1);\r\n        });\r\n      } else {\r\n        step(index + 1);\r\n      }\r\n    }\r\n  };\r\n  step(0);\r\n}\r\n\r\n","import { AppOptions, PageOptions, ComponentOptions } from \"./types\";\r\n\r\nexport function injectRouter(router: any) {\r\n  const originApp = App;\r\n  App = function (options: AppOptions) {\r\n    const newOptions = {\r\n      ...options,\r\n      onLaunch(o: WechatMiniprogram.App.LaunchShowOption) {\r\n        this.$router = router;\r\n        options?.onLaunch?.call(this, o);\r\n      },\r\n    } as AppOptions;\r\n\r\n    return originApp(newOptions);\r\n  } as any;\r\n\r\n  const OriginPage = Page;\r\n  Page = function (options: PageOptions) {\r\n    const newOptions: PageOptions = {\r\n      ...options,\r\n      onLoad(o) {\r\n        this.$router = router;\r\n        options?.onLoad?.call(this, o);\r\n      },\r\n    };\r\n    return OriginPage(newOptions);\r\n  } as any;\r\n\r\n  const OriginComponent = Component;\r\n  Component = function (options: ComponentOptions) {\r\n    const newOptions: ComponentOptions = {\r\n      ...options,\r\n      attached() {\r\n        this.$router = router;\r\n        options?.attached?.call(this);\r\n      },\r\n      lifetimes: {\r\n        attached() {\r\n          this.$router = router;\r\n          options?.lifetimes?.attached?.call(this);\r\n        },\r\n      },\r\n    };\r\n\r\n    return OriginComponent(newOptions);\r\n  } as any;\r\n}\r\n","import {\n  RouteConfigRaw,\n  PlainRouteOptions,\n  CallbackResult,\n  Callback,\n  RouteBackOptions,\n  AdvanceBeforeHookRouteOptions,\n  JumpObject,\n  PlainBeforeHookRouteOptions,\n} from \"./types\";\n\nimport { registerHook, runQueue } from \"./utils\";\nimport { injectRouter } from \"./injectRouter\";\n\nexport class PlainRouter {\n  constructor() {}\n\n  private params: any = null;\n  route: string | null = null;\n  private toRoute: string | null = null;\n  private jumpObject = {} as JumpObject;\n\n  private beforeHooks: Callback[] = [];\n  private afterHooks: Callback[] = [];\n\n  private routeSuccessFns: Callback[] = [];\n  private routeFailFns: Callback[] = [];\n\n  beforeEnter(fn: Callback) {\n    registerHook(this.beforeHooks, fn);\n  }\n\n  afterEnter(fn: Callback) {\n    registerHook(this.afterHooks, fn);\n  }\n\n  routeOptionsCheck(r: PlainRouteOptions) {\n    if (!r.path) return false;\n    this.params = r.params;\n    this.toRoute = this.getCurrentRoute();\n    return true;\n  }\n\n  navigateTo(r: PlainRouteOptions) {\n    if (!this.routeOptionsCheck(r)) return;\n\n    const obj = {} as JumpObject;\n    const promise = new Promise<CallbackResult>((resolve, reject) => {\n      obj.resolve = resolve;\n      obj.reject = reject;\n      obj.fn = () => {\n        setTimeout(() => {\n          const pages = getCurrentPages();\n          const index = pages.findIndex((item) => {\n            \"/\" + item.route === r?.path;\n          });\n\n          if (index !== -1) {\n            const level = pages.length - index;\n            wx.navigateBack({\n              delta: level,\n              success: (res: CallbackResult) => resolve(res),\n              fail: (err: CallbackResult) => reject(err),\n            });\n          } else {\n            wx.navigateTo({\n              url: r?.path,\n              success: (res: CallbackResult) => resolve(res),\n              fail: (err: CallbackResult) => reject(err),\n            });\n          }\n        }, r.delay ?? 0);\n      };\n    });\n\n    obj.promise = promise;\n    this.jumpObject = obj;\n    this.handleRouteGuard();\n\n    return promise;\n  }\n\n  switchTab(r: PlainRouteOptions) {\n    if (!this.routeOptionsCheck(r)) return;\n\n    const obj = {} as JumpObject;\n    const promise = new Promise<CallbackResult>((resolve, reject) => {\n      obj.resolve = resolve;\n      obj.reject = reject;\n      obj.fn = () => {\n        setTimeout(() => {\n          wx.switchTab({\n            url: r.path,\n            success: (res: CallbackResult) => resolve(res),\n            fail: (err: CallbackResult) => reject(err),\n          });\n        }, r.delay ?? 0);\n      };\n    });\n\n    obj.promise = promise;\n    this.jumpObject = obj;\n    this.handleRouteGuard();\n\n    return promise;\n  }\n\n  redirectTo(r: PlainRouteOptions) {\n    if (!this.routeOptionsCheck(r)) return;\n\n    const obj = {} as JumpObject;\n    const promise = new Promise<CallbackResult>((resolve, reject) => {\n      obj.resolve = resolve;\n      obj.reject = reject;\n      obj.fn = () => {\n        setTimeout(() => {\n          wx.redirectTo({\n            url: r.path,\n            success: (res: CallbackResult) => resolve(res),\n            fail: (err: CallbackResult) => reject(err),\n          });\n        }, r.delay ?? 0);\n      };\n    });\n\n    obj.promise = promise;\n    this.jumpObject = obj;\n    this.handleRouteGuard();\n\n    return promise;\n  }\n\n  navigateBack(r: RouteBackOptions<PlainRouteOptions>) {\n    if (!this.routeOptionsCheck(r)) return;\n\n    let level: number;\n    if (r.level) {\n      level = r.level;\n    } else {\n      const pages = getCurrentPages();\n      const index = pages.findIndex((item) => {\n        item.route === r?.path;\n      });\n      if (index !== -1) {\n        level = pages.length - index;\n      }\n    }\n\n    const obj = {} as JumpObject;\n    const promise = new Promise<CallbackResult>((resolve, reject) => {\n      obj.resolve = resolve;\n      obj.reject = reject;\n      obj.fn = () => {\n        setTimeout(() => {\n          wx.navigateBack({\n            delta: level,\n            success: (res: CallbackResult) => resolve(res),\n            fail: (err: CallbackResult) => reject(err),\n          });\n        }, r.delay ?? 0);\n      };\n    });\n\n    obj.promise = promise;\n    this.jumpObject = obj;\n    this.handleRouteGuard();\n\n    return promise;\n  }\n\n  reLaunch(r: PlainRouteOptions) {\n    if (!this.routeOptionsCheck(r)) return;\n\n    const obj = {} as JumpObject;\n    const promise = new Promise<CallbackResult>((resolve, reject) => {\n      obj.resolve = resolve;\n      obj.reject = reject;\n      obj.fn = () => {\n        setTimeout(() => {\n          wx.reLaunch({\n            url: r.path,\n            success: (res: CallbackResult) => resolve(res),\n            fail: (err: CallbackResult) => reject(err),\n          });\n        }, r.delay ?? 0);\n      };\n    });\n\n    obj.promise = promise;\n    this.jumpObject = obj;\n    this.handleRouteGuard();\n\n    return promise;\n  }\n\n  private getPage(index = 1) {\n    const pages = getCurrentPages();\n    return pages[pages.length - index];\n  }\n\n  private handleRouteGuard() {\n    const queue = this.beforeHooks;\n\n    const iterator = (hook: Callback, next: Callback) => {\n      try {\n        hook(this.route, this.toRoute, (to: PlainBeforeHookRouteOptions) => {\n          if (to === false) {\n            this.jumpObject.reject({ msg: \"this route has been blocked\" });\n          } else if (typeof to === \"object\" && typeof to.path === \"string\") {\n            to.type === \"redirect\" ? this.redirectTo(to) : \"\";\n            to.type === \"switchTab\" ? this.switchTab(to) : \"\";\n            to.type === \"navigate\" ? this.navigateTo(to) : \"\";\n          } else {\n            next(to);\n          }\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    runQueue(queue, iterator, () => {\n      // debugger;\n      this.jumpObject.fn();\n\n      this.jumpObject.promise\n        .then((res) => {\n          this.afterHooks.forEach((fn) => fn(this.route, this.toRoute));\n          this.routeSuccessFns.forEach((item) => item(res));\n          this.route = this.getCurrentRoute();\n          this.toRoute = null;\n        })\n        .catch((err) => {\n          this.routeFailFns.forEach((item) => item(err));\n        });\n    });\n  }\n\n  private getCurrentRoute() {\n    const url = this.getCurrPage().route;\n    return url;\n  }\n\n  onRouteSuccess(fn: (o: CallbackResult) => any) {\n    return registerHook(this.routeSuccessFns, fn);\n  }\n\n  onRouteFail(fn: (o: CallbackResult) => any) {\n    return registerHook(this.routeFailFns, fn);\n  }\n\n  getCurrPage() {\n    return this.getPage(1);\n  }\n\n  getPrevPage() {\n    return this.getPage(2);\n  }\n\n  getParams() {\n    const p = this.params;\n    this.params = null;\n    return p;\n  }\n\n  inject() {\n    injectRouter(this);\n  }\n}\n"],"names":[],"mappings":"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"}