{"version":3,"file":"index.js","sources":["../../../../../src/libs/utils.ts","../../../../../src/libs/injectRouter.ts","../../../../../src/libs/router.ts"],"sourcesContent":["import {Callback} from './types'\n\nexport function registerHook(list:Callback[], fn:Callback) {\n  list.push(fn);\n  return () => {\n    //等待调用的时候从中取出\n    const i = list.indexOf(fn);\n    if (i > -1) list.splice(i, 1);\n  };\n}\n\n\nexport function runQueue(queue:Callback[], fn:Callback, cb:Callback) {\n  const step = (index: number) => {\n    if (index >= queue.length) {\n      cb();\n    } else {\n      if (queue[index]) {\n        fn(queue[index], () => {\n          step(index + 1);\n        });\n      } else {\n        step(index + 1);\n      }\n    }\n  };\n  step(0);\n}\n\n","import { AppOptions, PageOptions, ComponentOptions } from \"./types\";\n\nexport function injectRouter(router: any) {\n  const originApp = App;\n  App = function (options: AppOptions) {\n    const newOptions = {\n      ...options,\n      onLaunch(o: WechatMiniprogram.App.LaunchShowOption) {\n        this.$router = router;\n        options?.onLaunch?.call(this, o);\n      },\n    } as AppOptions;\n\n    return originApp(newOptions);\n  } as any;\n\n  const OriginPage = Page;\n  Page = function (options: PageOptions) {\n    const newOptions: PageOptions = {\n      ...options,\n      onLoad(o) {\n        this.$router = router;\n        options?.onLoad?.call(this, o);\n      },\n    };\n    return OriginPage(newOptions);\n  } as any;\n\n  const OriginComponent = Component;\n  Component = function (options: ComponentOptions) {\n    const newOptions: ComponentOptions = {\n      ...options,\n      attached() {\n        this.$router = router;\n        options?.attached?.call(this);\n      },\n      lifetimes: {\n        attached() {\n          this.$router = router;\n          options?.lifetimes?.attached?.call(this);\n        },\n      },\n    };\n\n    return OriginComponent(newOptions);\n  } as any;\n}\n","import {\r\n  RouteConfigRaw,\r\n  RouteOptions,\r\n  RouteNameOptions,\r\n  CallbackResult,\r\n  Callback,\r\n  RouteBackOptions,\r\n  BeforeHookRouteOptions,\r\n} from \"./types\";\r\n\r\nimport { registerHook, runQueue } from \"./utils\";\r\nimport {injectRouter} from './injectRouter'\r\n\r\n\r\nclass Router {\r\n  constructor(routes: RouteConfigRaw[]) {\r\n    this.routes = routes;\r\n  }\r\n\r\n  private params: any = null;\r\n  private routes: RouteConfigRaw[];\r\n  route: RouteConfigRaw | null = null;\r\n  private toRoute: RouteConfigRaw | null = null;\r\n  private jumpFn = function () {} as Callback<Promise<CallbackResult>>;\r\n\r\n  private beforeHooks: Callback[] = [];\r\n  private afterHooks: Callback[] = [];\r\n\r\n  private routeSuccessFns: Callback[] = [];\r\n  private routeFailFns: Callback[] = [];\r\n\r\n  beforeEnter(fn: Callback) {\r\n    registerHook(this.beforeHooks, fn);\r\n  }\r\n\r\n  afterEnter(fn: Callback) {\r\n    registerHook(this.afterHooks, fn);\r\n  }\r\n\r\n  push(r: RouteOptions) {\r\n    if (!r.name && !r.path) {\r\n      return;\r\n    }\r\n    this.params = r.params;\r\n    this.toRoute = this.getCurrentRoute();\r\n    this.jumpFn = () => {\r\n      return new Promise((resolve, reject) => {\r\n        const route = this.routes.filter(\r\n          (item) => item.name === r.name || item.path === r.path\r\n        )[0];\r\n        setTimeout(() => {\r\n          if (route?.type === \"tab\") {\r\n            wx.switchTab({\r\n              url: route.path,\r\n              success: (res: CallbackResult) => resolve(res),\r\n              fail: (err: CallbackResult) => reject(err),\r\n            });\r\n          }\r\n\r\n          const pages = getCurrentPages();\r\n          const index = pages.findIndex((item) => {\r\n            \"/\" + item.route === route?.path;\r\n          });\r\n\r\n          if (index !== -1) {\r\n            const level = pages.length - index;\r\n            wx.navigateBack({\r\n              delta: level,\r\n              success: (res: CallbackResult) => resolve(res),\r\n              fail: (err: CallbackResult) => reject(err),\r\n            });\r\n          } else {\r\n            wx.navigateTo({\r\n              url: route?.path,\r\n              success: (res: CallbackResult) => resolve(res),\r\n              fail: (err: CallbackResult) => reject(err),\r\n            });\r\n          }\r\n        }, r.delay ?? 0);\r\n      });\r\n    };\r\n    this.handleRouteGuard();\r\n  }\r\n\r\n  replace(r: RouteOptions) {\r\n    if (!r.name && !r.path) {\r\n      return;\r\n    }\r\n    this.params = r.params;\r\n    this.toRoute = this.getCurrentRoute();\r\n\r\n    this.jumpFn = () => {\r\n      return new Promise((resolve, reject) => {\r\n        const route = this.routes.filter(\r\n          (item) => item.name === r.name || item.path === r.path\r\n        )[0];\r\n        setTimeout(() => {\r\n          wx.redirectTo({\r\n            url: route.path,\r\n            success: (res: CallbackResult) => resolve(res),\r\n            fail: (err: CallbackResult) => reject(err),\r\n          });\r\n        }, r.delay ?? 0);\r\n      });\r\n    };\r\n\r\n    this.handleRouteGuard();\r\n  }\r\n\r\n  back(r: RouteBackOptions) {\r\n    if (!r.name && !r.path && !r.level) {\r\n      return;\r\n    }\r\n    this.params = r.params;\r\n    this.toRoute = this.getCurrentRoute();\r\n\r\n    const route = this.routes.filter(\r\n      (item) => item.name === r.name || item.path === r.path\r\n    )[0];\r\n\r\n    let level: number;\r\n    if (r.level) {\r\n      level = r.level;\r\n    } else {\r\n      const pages = getCurrentPages();\r\n      const index = pages.findIndex((item) => {\r\n        item.route === route?.path;\r\n      });\r\n      if (index !== -1) {\r\n        level = pages.length - index;\r\n      }\r\n    }\r\n    this.jumpFn = () => {\r\n      return new Promise((resolve, reject) => {\r\n        setTimeout(() => {\r\n          wx.navigateBack({\r\n            delta: level,\r\n            success: (res: CallbackResult) => resolve(res),\r\n            fail: (err: CallbackResult) => reject(err),\r\n          });\r\n        }, r.delay ?? 0);\r\n      });\r\n    };\r\n\r\n    this.handleRouteGuard();\r\n  }\r\n\r\n  reLaunch(r: RouteOptions) {\r\n    if (!r.name && !r.path) {\r\n      return;\r\n    }\r\n    this.params = r.params;\r\n    this.toRoute = this.getCurrentRoute();\r\n\r\n    this.jumpFn = () => {\r\n      return new Promise((resolve, reject) => {\r\n        const route = this.routes.filter(\r\n          (item) => item.name === r.name || item.path === r.path\r\n        )[0];\r\n        setTimeout(() => {\r\n          wx.reLaunch({\r\n            url: route.path,\r\n            success: (res: CallbackResult) => resolve(res),\r\n            fail: (err: CallbackResult) => reject(err),\r\n          });\r\n        }, r.delay ?? 0);\r\n      });\r\n    };\r\n    this.handleRouteGuard();\r\n  }\r\n\r\n  private getPage(index = 1) {\r\n    const pages = getCurrentPages();\r\n    return pages[pages.length - index];\r\n  }\r\n\r\n  private handleRouteGuard() {\r\n    const queue = this.beforeHooks;\r\n\r\n    const iterator = (hook: Callback, next: Callback) => {\r\n      try {\r\n        hook(this.route, this.toRoute, (to: BeforeHookRouteOptions) => {\r\n          if (to === false) {\r\n            // TODO 打断路由\r\n          } else if (\r\n            typeof to === \"object\" &&\r\n            (typeof to.path === \"string\" || typeof to.name === \"string\")\r\n          ) {\r\n            to.replace ? this.replace(to) : this.push(to);\r\n          } else if (typeof to === \"string\") {\r\n            this.push({ name: to, path: to });\r\n          } else {\r\n            next(to);\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    };\r\n\r\n    runQueue(queue, iterator, () => {\r\n      // debugger;\r\n      this.jumpFn()\r\n        .then((res) => {\r\n          this.afterHooks.forEach(fn=> fn(this.route, this.toRoute));\r\n          this.routeSuccessFns.forEach((item) => item(res));\r\n          this.route = this.getCurrentRoute();\r\n          this.toRoute = null;\r\n        })\r\n        .catch((err) => {\r\n          this.routeFailFns.forEach((item) => item(err));\r\n        });\r\n    });\r\n  }\r\n\r\n  private getCurrentRoute() {\r\n    const url = this.getCurrPage().route;\r\n    const route = this.routes.filter((item) => item.path === \"/\" + url)[0];\r\n    return route;\r\n  }\r\n\r\n  onRouteSuccess(fn: (o: CallbackResult) => any) {\r\n    return registerHook(this.routeSuccessFns, fn);\r\n  }\r\n\r\n  onRouteFail(fn: (o: CallbackResult) => any) {\r\n    return registerHook(this.routeFailFns, fn);\r\n  }\r\n\r\n  getCurrPage() {\r\n    return this.getPage(1);\r\n  }\r\n\r\n  getPrevPage() {\r\n    return this.getPage(2);\r\n  }\r\n\r\n  getParams() {\r\n    const p = this.params;\r\n    this.params = null;\r\n    return p;\r\n  }\r\n\r\n  inject() {\r\n    injectRouter(this);\r\n  }\r\n}\r\n\r\nexport function createRouter(config: { routes: RouteConfigRaw[] }) {\r\n  const router = new Router(config.routes);\r\n  return router;\r\n}\r\n"],"names":[],"mappings":"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"}